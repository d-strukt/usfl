!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.usfl=e()}}(function(){return function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return r(n?n:e)},d,d.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";function o(e){e=e||{};var t,n=e.crossOrigin,s=!!e.isTouchLocked,a=!(!e.blob||!i),c=e.webAudioContext,u={},d=[],l=[],h=0,f=0,p=function(e){if(Array.isArray(e))return e.forEach(function(e){p(e)}),t;var n=new o.Loader(v(e));return l.push(n),t},m=function(e){return u[e]},v=function(e){if("string"==typeof e){var t=e;e={url:t}}return void 0===e.isTouchLocked&&(e.isTouchLocked=s),void 0===e.blob&&(e.blob=a),e.id=e.id||e.url,e.type=e.type||e.url.split("?")[0].split(".").pop().toLowerCase(),e.crossOrigin=e.crossOrigin||n,e.webAudioContext=e.webAudioContext||c,e},g=function(){return f=l.length,l.forEach(function(e){e.on("progress",w),e.once("complete",x),e.once("error",y),e.start()}),t},w=function(e){var n=h+e;t.emit("progress",n/f)},x=function(e,n){h++,t.emit("progress",h/f),u[e]=n,d.push(n),t.emit("child",n),b()},y=function(e){f--,t.listeners("error").length&&t.emit("error",e),b()},b=function(){h>=f&&t.emit("complete",d,u)},E=function(){for(;l.length;)l.pop().destroy();return t.off("error"),t.off("progress"),t.off("complete"),u={},d=[],c=null,f=0,h=0,t};return t=Object.create(r.prototype,{_events:{value:{}},add:{value:p},start:{value:g},get:{value:m},destroy:{value:E}}),Array.isArray(e.assets)&&p(e.assets),Object.freeze(t)}var r=e("./Emitter"),i=function(){try{return!!new Blob}catch(e){return!1}}();o.Loader=function(e){var t,n,s,a,c,u=e.id,d=e.url,l=e.type,h=e.crossOrigin,f=e.isTouchLocked,p=e.blob&&i,m=e.webAudioContext,v=function(){switch(a=Date.now(),l){case"json":E();break;case"jpg":case"png":case"gif":case"webp":L();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":M();break;case"ogv":case"mp4":case"webm":case"hls":F();break;case"bin":w("arraybuffer");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+d+" ("+l+")"}},g=function(e){e&&(t.emit("progress",1),t.emit("complete",u,e),S())},w=function(e,t){n=t||y,s=new XMLHttpRequest,s.open("GET",d,!0),s.responseType=e,s.addEventListener("progress",x),s.addEventListener("load",n),s.addEventListener("error",I),s.send()},x=function(e){e.lengthComputable&&t.emit("progress",e.loaded/e.total)},y=function(){b()&&g(s.response)},b=function(){return s&&s.status<400?(o.stats.update(s,a,d),!0):(I(s&&s.statusText),!1)},E=function(){w("json",function(){if(b()){var e=s.response;"string"==typeof e&&(e=JSON.parse(e)),g(e)}})},L=function(){p?T():A()},A=function(){s=new Image,h&&(s.crossOrigin="anonymous"),s.addEventListener("error",I,!1),s.addEventListener("load",C,!1),s.src=d},C=function(){window.clearTimeout(c),g(s)},T=function(){w("blob",function(){if(b()){var e=window.URL.createObjectURL(s.response);s=new Image,s.addEventListener("error",I,!1),s.addEventListener("load",_,!1),s.src=e}})},_=function(){window.URL.revokeObjectURL(d),g(s)},M=function(e){e?O():P("audio")},F=function(){p?w("blob"):P("video")},O=function(){w("arraybuffer",function(){b()&&m.decodeAudioData(s.response,function(e){s=null,g(e)},function(e){I(e)})})},P=function(e){s=document.createElement(e),f||(window.clearTimeout(c),c=window.setTimeout(C,2e3),s.addEventListener("canplaythrough",C,!1)),s.addEventListener("error",I,!1),s.preload="auto",s.src=d,s.load(),f&&g(s)},I=function(e){window.clearTimeout(c);var n=e;if(s&&s.tagName&&s.error){var o=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"];n="MediaError: "+o[s.error.code]+" "+s.src}else s&&s.statusText?n=s.statusText:e&&e.message?n=e.message:e&&e.type&&(n=e.type);t.emit("error",'Error loading "'+d+'" '+n),k()},S=function(){t.off("error"),t.off("progress"),t.off("complete"),s&&(s.removeEventListener("progress",x),s.removeEventListener("load",n),s.removeEventListener("error",I),s.removeEventListener("load",C),s.removeEventListener("canplaythrough",C),s.removeEventListener("load",_))},k=function(){S(),s&&s.abort&&s.readyState<4&&s.abort(),s=null,m=null,window.clearTimeout(c)};return t=Object.create(r.prototype,{_events:{value:{}},start:{value:v},destroy:{value:k}}),Object.freeze(t)},o.stats={mbs:0,secs:0,update:function(e,t,n){var o,r=e.getAllResponseHeaders();if(r){var i=r.match(/content-length: (\d+)/i);i&&i.length&&(o=i[1])}if(o){o=parseInt(o,10);var s=o/1024/1024,a=(Date.now()-t)/1e3;this.secs+=a,this.mbs+=s,this.log(n,s,a)}else console.warn.call(console,"Can't get Content-Length:",n)},log:function(e,t,n){if(console.log.call(console,e,t,n),e){var o="File loaded: "+e.substr(e.lastIndexOf("/")+1)+" size:"+t.toFixed(2)+"mb time:"+n.toFixed(2)+"s speed:"+(t/n).toFixed(2)+"mbps";console.log.call(console,o)}var r="Total loaded: "+this.mbs.toFixed(2)+"mb time:"+this.secs.toFixed(2)+"s speed:"+this.getMbps().toFixed(2)+"mbps";console.log.call(console,r)},getMbps:function(){return this.mbs/this.secs}},t.exports=o},{"./Emitter":3}],2:[function(e,t,n){"use strict";function o(){var e,t,n=[],o=0,r=-1,i=.2,s=function(t,o,r){return n.push({position:t,name:o,data:r}),n.sort(function(e,t){return e.position-t.position}),e},a=function(n,o){return t=n?o?n.bind(o):n:null,e},c=function(){return n.length=0,u()},u=function(){return o=0,r=-1,e},d=function(t){return i=t,e},l=function(t){return o=t,h(o,r),r=o,e},h=function(e,o){o>=e||"function"==typeof t&&n.some(function(n){return f(n.position,e,o)?(t(n),!0):void 0})},f=function(e,t,n){if(e>t)return!1;if(n>=e)return!1;var o=e-t;return 0>o&&(o=-o),i>=o};return e=Object.freeze({add:s,onCuepoint:a,removeAll:c,reset:u,setTolerance:d,update:l})}t.exports=o},{}],3:[function(e,t,n){"use strict";function o(){r.call(this),this.setMaxListeners(20)}var r=e("events").EventEmitter;o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.off=function(e,t){return t?this.removeListener(e,t):e?this.removeAllListeners(e):this.removeAllListeners()},t.exports=o},{events:23}],4:[function(e,t,n){"use strict";function o(e){function t(){void 0!==window.FB?(window.FB.init({appId:e,status:!0,cookie:!0,logging:!0,xfbml:!0}),window.FB.getLoginStatus(function(e){d.emit("init",e.status)}),clearTimeout(u)):window.fbAsyncInit=function(){t()}}function n(e,t){window.FB.login(function(){e()},{scope:t||""})}function o(e,t){return void 0===t||""===t?e():void window.FB.api("/me/permissions",function(o){for(var r=!0,i=t.split(","),s=0;s<i.length&&(r=!!o.data[0][i[s]],r);s++);return r?e():void n(e,t)})}function s(e,t){window.FB.getLoginStatus(function(r){"connected"===r.status?o(e,t):n(e,t)})}function a(e,t){s(function(){window.FB.api("/me",{fields:t},function(e){!e||e.error?d.emit("info",null):d.emit("info",e)})},e)}function c(){if(void 0===window.FB){var e=document.getElementById("fb-root");e||(e=document.createElement("div"),e.setAttribute("id","fb-root"),document.body.appendChild(e));var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=document.location.protocol+"//connect.facebook.net/en_US/all.js",e.appendChild(t),u=setTimeout(c,6e3)}}var u;c();var d=Object.create(r.prototype,{_events:{value:{}},init:{value:t},login:{value:n},utils:{value:i},getInfo:{value:a}});return d}var r=e("./Emitter"),i={getProfileImageUrl:function(e,t,n){return document.location.protocol+"//graph.facebook.com/"+e+"/picture?width="+t+"&height="+n},resizeCanvas:function(e){window.FB.Canvas.setSize({height:e}),setTimeout(function(){window.FB.Canvas.setSize({height:e})},1e3)},scrollToTop:function(){window.FB.Canvas.scrollTo(0,0)},logout:function(){window.FB.Event.subscribe("auth.logout",function(e){e&&!e.error}),window.FB.logout()},getFriends:function(e){window.FB.api("/me/friends",{limit:e},function(e){!e||e.error})},sortFriendsByMutual:function(e){var t=e.friends.data.sort(function(e,t){var n=e.mutualfriends?e.mutualfriends.data.length:0,o=t.mutualfriends?t.mutualfriends.data.length:0;return o-n});return t},statusPublish:function(e){window.FB.api("/me/feed","post",{message:e},function(e){!e||e.error})},sendDialog:function(e,t,n,o,r){window.FB.ui({method:"send",to:r,name:t,picture:o,link:e,display:"popup",description:n},function(e){e.success})},streamPublish:function(e,t,n,o,r){var i={method:"stream.publish",message:e,attachment:t,action_links:n,user_message_prompt:o,target_id:r};window.FB.ui(i,function(e){!e||e.error})},test_streamPublish:function(){var e="message",t={name:"name",caption:"caption",description:"description",href:"http://example.com/"},n=[{text:"action_link",href:"http://example.com/"}],o="user_message_prompt";this.streamPublish(e,t,n,o)}};"object"==typeof t&&t.exports&&(t.exports=o)},{"./Emitter":3}],5:[function(e,t,n){"use strict";function o(e,t,n,o){this.emitter=new r,this.elementId=e.getAttribute("id"),this.flashId="flash-"+this.elementId,this.url=t,this.embedvars=n||{},this.flashvars=o||{},this.isReady=!1,this.queuedCalls=[]}var r=e("./Emitter"),i=window.swfobject;o.prototype={embed:function(){this._getFlashvarsFromQueryString(this.flashvars),this._formatPaths(this.flashvars);var e,t=i.getFlashPlayerVersion(),n=t.major,o=t.minor,r=(this.embedvars.version||"10.2.0").split("."),s=parseInt(r[0],10),a=parseInt(r[1],10);if(0===t.major)e=-1;else if(s>n||n===s&&a>o)e=0;else{var c={menu:!1,quality:"high",bgcolor:this.embedvars.bgColor||"#ffffff",allowFullScreen:!0,allowFullScreenInteractive:!0,allowScriptAccess:"always",wmode:this.embedvars.wmode||void 0},u={id:this.flashId,name:this.flashId};i.embedSWF(this.url,this.elementId,this.embedvars.width||"100%",this.embedvars.height||"100%",this.embedvars.version||"10.2.0",this.flashvars.assetsPath+"swf/expressInstall.swf",this.flashvars,c,u),e=1}this.emitter.emit("embed",e)},getFlashObject:function(){return i.getObjectById(this.flashId)},ready:function(){this.isReady||(this.isReady=!0,this._applyQueuedCalls(),this.emitter.emit("ready"))},call:function(e){try{var t=this.getFlashObject();if(this.isReady&&t&&t[e])return arguments.length>4?t[e](arguments[1],arguments[2],arguments[3],arguments[4]):arguments.length>3?t[e](arguments[1],arguments[2],arguments[3]):arguments.length>2?t[e](arguments[1],arguments[2]):arguments.length>1?t[e](arguments[1]):t[e]();this.queuedCalls.push(arguments)}catch(n){}return!1},_applyQueuedCalls:function(){for(var e=this.queuedCalls,t=e.length,n=0;t>n;)this.call.apply(this,e[n]),n++;this.queuedCalls=[]},_getFlashvarsFromQueryString:function(e){function t(t){i.getQueryParamValue(t)&&(e[t]=i.getQueryParamValue(t))}function n(e){for(var n in e)e.hasOwnProperty(n)&&t(n)}n(e),e.locale||t("locale"),e.debug||t("debug"),e.bw||t("bw")},_formatPaths:function(e){function t(e){e&&e.lastIndexOf("/")!==e.length-1&&(e+="/"),e&&"//"===e.substr(0,2)&&(e=document.location.protocol+e)}t(e.assetsPath),t(e.videoPath),t(e.audioPath),t(e.appPath)}},"object"==typeof t&&t.exports&&(t.exports=o)},{"./Emitter":3}],6:[function(e,t,n){"use strict";function o(e){function t(){(s!==d||a!==l)&&(d=s,l=a,e.innerHTML="FPS: "+s+"<br />AVE: "+a)}function n(e){void 0===e&&(e=Date.now()),0===r&&(r=e),e-1e3>r&&(r=e,s=i,i=0,s>1&&(c++,u+=s,a=Math.floor(u/c)),t()),i++}function o(){window.requestAnimationFrame(o),n()}var r=0,i=0,s=0,a=0,c=0,u=0,d=0,l=0;return e||(e=document.createElement("div"),e.setAttribute("id","fps"),e.style.position="absolute",e.style.top="0px",e.style.right="0px",e.style.padding="2px 6px",e.style.zIndex="99999",e.style.background="#000",e.style.color="#fff",e.style.fontSize="10px",document.body.appendChild(e)),{autoUpdate:o,update:n}}"object"==typeof t&&t.exports&&(t.exports=o)},{}],7:[function(e,t,n){"use strict";function o(e){this.init(e)}o.prototype={init:function(e){e?(this.canvas=e,this.size(this.canvas.width,this.canvas.height)):document.querySelector("canvas")?(this.canvas=document.querySelector("canvas"),this.size(this.canvas.width,this.canvas.height)):(this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas),this.size()),this.context=this.canvas.getContext("2d"),this._textFont="Times",this._textSize=12,this.context.font=this._textSize+"px "+this._textFont},size:function(e,t){this.width=this.canvas.width=e||window.innerWidth,this.height=this.canvas.height=t||window.innerHeight},clear:function(e){e?(this.context.fillStyle=e,this.context.fillRect(0,0,this.width,this.height)):this.context.clearRect(0,0,this.width,this.height)},background:function(e,t,n){this.clear("rgb("+e+", "+n+", "+t+")")},fill:function(e,t,n,o){return"string"==typeof e?void(this.context.fillStyle=e):(o=void 0===o?1:o,void(this.context.fillStyle="rgba("+e+", "+n+", "+t+", "+o+")"))},stroke:function(e,t,n,o){o=void 0===o?1:o,this.context.strokeStyle="rgba("+e+", "+n+", "+t+", "+o+")"},strokeWeight:function(e){this.context.lineWidth=e},move:function(e,t){this.context.moveTo(e,t)},line:function(e,t,n,o){this.context.beginPath(),this.context.moveTo(e,t),this.context.lineTo(n,o),this.context.stroke()},rect:function(e,t,n,o,r){void 0!==r&&0!==r?(this.context.save(),this.context.translate(e+n/2,t+o/2),this.context.rotate(r),this.context.rect(-n/2,-o/2,n,o),this.context.fill(),this.context.stroke(),this.context.restore()):(this.context.rect(e,t,n,o),this.context.fill(),this.context.stroke())},circle:function(e,t,n){this.context.beginPath(),this.context.arc(e,t,n,0,2*Math.PI,!1),this.context.fill(),this.context.stroke()},triangle:function(e,t,n,o,r){void 0!==r&&0!==r?(this.context.save(),this.context.translate(e,t),this.context.rotate(r),this.context.beginPath(),this.context.moveTo(0-n/2,0+o/2),this.context.lineTo(0,0-o/2),this.context.lineTo(0+n/2,0+o/2),this.context.closePath(),this.context.stroke(),this.context.fill(),this.context.restore()):(this.context.beginPath(),this.context.moveTo(e-n/2,t+o/2),this.context.lineTo(e,t-o/2),this.context.lineTo(e+n/2,t+o/2),this.context.closePath(),this.context.stroke(),this.context.fill())},triangleABC:function(e,t,n,o,r,i){this.context.beginPath(),this.context.moveTo(e,t),this.context.lineTo(n,o),this.context.lineTo(r,i),this.context.closePath(),this.context.stroke(),this.context.fill()},image:function(e,t,n,o){if(void 0!==o&&0!==o){var r=e.width/2,i=e.height/2;this.context.save(),this.context.translate(t+r,n+i),this.context.rotate(o),this.context.drawImage(e,-r,-i),this.context.restore()}else this.context.drawImage(e,t,n)},cross:function(e){this.context.beginPath(),this.context.moveTo(-e,-e),this.context.lineTo(e,e),this.context.moveTo(-e,e),this.context.lineTo(e,-e),this.context.stroke()},text:function(e,t,n){this.context.fillText(e,t,n)},textFont:function(e){this._textFont=e,this.context.font=this._textSize+"px "+e},textSize:function(e){this._textSize=e,this.context.font=e+"px "+this._textFont},openImage:function(){var e=window.open("","Canvas Image"),t=this.canvas.toDataURL("image/png");e.document.write('<img src="'+t+'" width="'+this.width+'" height="'+this.height+'" />')},downloadImage:function(){var e=this.canvas.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=e},getImageData:function(){return this.context.getImageData(0,0,this.width,this.height)},getPixel:function(e,t){var n=this.getImageData(),o=4*(e+t*n.width);return Array.prototype.slice.call(n.data,o,o+4)},setPixel:function(e,t,n,o,r,i){var s=this.getImageData(),a=4*(e+t*s.width);s.data[a+0]=n,s.data[a+1]=o,s.data[a+2]=r,s.data[a+3]=i},eachPixel:function(e){for(var t=this.getImageData(),n=t.data,o=t.width,r=t.height,i=o*r,s=0;i>s;s++){var a=n[4*s],c=n[4*s+1],u=n[4*s+2],d=n[4*s+3],l=Math.floor(s/o),h=s-l*o;e(a,c,u,d,h,l)}}},"object"==typeof t&&t.exports&&(t.exports=o)},{}],8:[function(e,t,n){"use strict";function o(){var e,t=function(){var t;return t="number"==typeof window.pageXOffset?function(t){var n=t.clientX||0,o=t.clientY||0,r=window.pageXOffset,i=window.pageYOffset;e.x=n+r,e.y=o+i,e.percentX=e.x/window.innerWidth,e.percentY=e.y/window.innerHeight}:function(t){t=t&&t.clientX?t:window.event;var n=t.clientX,o=t.clientY,r=document.documentElement,i=document.body,s=Math.max(r.scrollLeft,i.scrollLeft),a=Math.max(r.scrollTop,i.scrollTop);e.x=n+s,e.y=o+a,e.percentX=e.x/window.innerWidth,e.percentY=e.y/window.innerHeight}}();return e={x:0,y:0,percentX:0,percentY:0,isListening:!1,on:function(){return document.body.addEventListener("mousemove",t),document.body.addEventListener("touchmove",t),e.isListening=!0,this},off:function(){return document.body.removeEventListener("mousemove",t),document.body.removeEventListener("touchmove",t),e.isListening=!1,this}}}"object"==typeof t&&t.exports&&(t.exports=o)},{}],9:[function(e,t,n){"use strict";function o(){function e(e){e.preventDefault(),n[e.keyCode]=!0}function t(e){e.preventDefault(),n[e.keyCode]=!1}for(var n=[],o=0;256>o;o++)n.push(!1);var i={on:function(){document.addEventListener("keydown",e,!1),document.addEventListener("keyup",t,!1)},off:function(){document.removeEventListener("keydown",e,!1),document.removeEventListener("keyup",t,!1)},isDown:function(e){return n[e]},left:function(){return n[r.LEFT]||n[r.A]},right:function(){return n[r.RIGHT]||n[r.D]},up:function(){return n[r.UP]||n[r.W]},down:function(){return n[r.DOWN]||n[r.S]},space:function(){return n[r.SPACEBAR]}};return i.on(),i}var r=e("./keyboard");"object"==typeof t&&t.exports&&(t.exports=o)},{"./keyboard":20}],10:[function(e,t,n){"use strict";function o(){function e(e){if(i){for(var t=i;t.next;)t=t.next;n(e,t)}else i=s=e;return e}function t(e){return e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===i&&(i=e.next),e===s&&(s=e.prev),e.next=e.prev=null,e}function n(e,n){return t(e),e.prev=n,e.next=n.next,n.next?n.next.prev=e:s=e,n.next=e,e}function o(e,n){return t(e),e.prev=n.prev,e.next=n,n.prev?n.prev.next=e:i=e,n.prev=e,e}function r(e,t){if(i){var n=Array.prototype.splice.call(arguments,2);n.unshift(null);for(var o=i;o;)n[0]=o,e.apply(t,n),o=o.next}}var i,s;return{getFirst:function(){return i},getLast:function(){return s},getCount:function(){for(var e=0,t=i;t;)e++,t=t.next;return e},add:e,remove:t,insertAfter:n,insertBefore:o,forEach:r}}"object"==typeof t&&t.exports&&(t.exports=o)},{}],11:[function(e,t,n){"use strict";function o(e){function t(){"onmousewheel"in window?window.addEventListener("mousewheel",o,!1):window.addEventListener&&window.addEventListener("DOMMouseScroll",o,!1)}function n(){"onmousewheel"in window?window.removeEventListener("mousewheel",o,!1):window.removeEventListener&&window.removeEventListener("DOMMouseScroll",o,!1)}function o(t){t||(t=window.event);var n=t.detail<0||t.wheelDelta>0?1:-1,o=n*e;n>0?i.emit("up",o):i.emit("down",o),i.emit("update",o)}e=e||2;var i;return t(),i=Object.create(r.prototype,{_events:{value:{}},add:{value:t},remove:{value:n}}),Object.freeze(i)}var r=e("./Emitter");"object"==typeof t&&t.exports&&(t.exports=o)},{"./Emitter":3}],12:[function(e,t,n){"use strict";function o(e){var t=[];return{getPool:function(){return t},get:function(){return t.length>0?t.pop():new e},dispose:function(e){t.push(e)},fill:function(n){for(;t.length<n;)t[t.length]=new e},empty:function(){t=[]}}}"object"==typeof t&&t.exports&&(t.exports=o)},{}],13:[function(e,t,n){"use strict";var o=e("./emitter");t.exports=function(e,t){function n(e,n,o){c.distance[e]=Math.abs(c.start[e]-c.end[e]),c.distance[e]>=t&&(c.direction[e]=c.start[e]>c.move[e]?n:o,a.emit("swipe",c.direction[e],c))}function r(e){if(e&&e.touches){c.originalEvent=e;var t=e.touches[0],o=t&&t.pageX,r=t&&t.pageY;switch(e.type){case"touchstart":c.start[0]=c.move[0]=c.end[0]=c.position[0]=o,c.start[1]=c.move[1]=c.end[1]=c.position[1]=r,c.touching=!0;break;case"touchmove":c.move[0]=c.position[0]=o,c.move[1]=c.position[1]=r;break;case"touchend":c.end[0]=c.position[0]=o,c.end[1]=c.position[1]=r,c.touching=!1,a.listenerCount("swipe")&&(n(0,"left","right"),n(1,"up","down"))}}}function i(t){return e=t||e,e.addEventListener("touchstart",r),e.addEventListener("touchmove",r),e.addEventListener("touchend",r),a}function s(){return a.removeAllListeners(),e.removeEventListener("touchstart",r),e.removeEventListener("touchmove",r),e.removeEventListener("touchend",r),e=null,a}e=e||document.body,t=t||10;var a,c={start:[-1,-1],move:[-1,-1],end:[-1,-1],position:[-1,-1],distance:[0,0],direction:["none","none"],touching:!1,originalEvent:null};return i(e),a=Object.create(o.prototype,{_events:{value:{}},listen:{value:i},isDown:{value:function(){return c.touching}},getTouch:{value:function(){return c}},destroy:{value:s}}),Object.freeze(a)}},{"./emitter":17}],14:[function(e,t,n){"use strict";function o(e){var t,n=e||document.createElement("video"),o=function(){t.emit("metadata",{src:n.currentSrc,width:n.videoWidth,height:n.videoHeight,duration:n.duration})},i=function(){t.emit("ready")},s=function(){t.emit("play")},a=function(){t.emit("ended")},c=function(){t.emit("error",n.error)},u=function(){t.emit("timeupdate",n.currentTime)},d=function(){l(),n.addEventListener("loadedmetadata",o,!1),n.addEventListener("canplaythrough",i,!1),n.addEventListener("play",s,!1),n.addEventListener("playing",s,!1),n.addEventListener("error",c,!1),n.addEventListener("ended",a,!1),n.addEventListener("timeupdate",u,!1)},l=function(){n.removeEventListener("loadedmetadata",o),n.removeEventListener("canplaythrough",i),n.removeEventListener("play",s),n.removeEventListener("playing",s),n.removeEventListener("error",c),n.removeEventListener("ended",a),n.removeEventListener("timeupdate",u)},h=function(){t.off(),n.pause();try{n.removeAttribute("src")}catch(e){}return l(),n.parentElement&&n.parentElement.removeChild(n),n=null,t},f=function(e){return window.Blob&&e instanceof window.Blob&&(e=g(e)),d(),n.crossOrigin="anonymous",n.preload="auto",n.src=e,n.load(),t},p=function(){return n.play(),t},m=function(){return n.pause(),t},v=function(e){try{n.currentTime=e}catch(o){}return t},g=function(e){e=window.URL.createObjectURL(e);var t=function(){n.removeEventListener("canplaythrough",t),window.URL.revokeObjectURL(e)};return n.addEventListener("canplaythrough",t),e};return d(),t=Object.create(r.prototype,{_events:{value:{}},destroy:{value:h},load:{value:f},pause:{value:m},play:{value:p},seek:{value:v},el:{get:function(){return n}},currentTime:{get:function(){return n.currentTime},set:function(e){n.currentTime=e}},duration:{get:function(){return n.duration}},volume:{get:function(){return n.volume},set:function(e){n.volume=e}}}),Object.freeze(t)}var r=e("./Emitter");t.exports=o},{"./Emitter":3}],15:[function(e,t,n){"use strict";var o={clone:function(e){return e.slice(0)},getRandom:function(e){return e[Math.floor(Math.random()*e.length)]},isArray:function(e){return Array.isArray?Array.isArray(e):e&&e instanceof Array},nearest:function(e,t){var n,o=Number.MAX_VALUE;return t.reduce(function(t,r,i){return n=Math.abs(r-e),o>n&&(o=n,t=i),e},-1)},sortNumeric:function(e){return e.sort(function(e,t){return e-t})},sortRandom:function(e){return e.sort(function(){return Math.random()>.5?-1:1})}};"object"==typeof t&&t.exports&&(t.exports=o)},{}],16:[function(e,t,n){"use strict";function o(){return!!w.match(/Android/i)}function r(){return!!(o()&&parseFloat(w.slice(w.indexOf("Android")+8))<4)}function i(){if(!o())return!1;var e=new RegExp(/AppleWebKit\/([\d.]+)/),t=e.exec(w),n=null===t?null:parseFloat(e.exec(w)[1]),r=null!==n&&537>n;return r}function s(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1}function a(){var e=document.createElement("div");return e.innerHTML="<!--[if lte IE 8]><i></i><![endif]-->",1===e.getElementsByTagName("i").length}function c(){var e=document.createElement("div");return e.innerHTML="<!--[if IE]><i></i><![endif]-->",1===e.getElementsByTagName("i").length}function u(){var e,t=-1;return"Microsoft Internet Explorer"===navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(w)&&(t=parseFloat(RegExp.$1))):"Netscape"===navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(w)&&(t=parseFloat(RegExp.$1))),t}function d(){return!!w.match(/OS 5(_\d)+ like Mac OS X/i)}function l(){return!!w.match(/iPad/i)}function h(){return!!w.match(/iPhone/i)}function f(){return!!w.match(/iPod/i)}function p(){return l()||f()||h()}function m(){return!!w.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)}function v(){return Math.max(window.outerHeight,window.screen.height)}function g(){return Math.max(window.outerWidth,window.screen.width)}var w=navigator.userAgent,x={android:o(),androidOld:r(),androidStock:i(),dpr:s(),ie8down:a(),ie9down:c(),ieVersion:u(),ios:p(),ios5:d(),ipad:l(),iphone:h(),ipod:f(),mobile:m(),retina:s()>1,screenHeight:v(),screenWidth:g()};"object"==typeof t&&t.exports&&(t.exports=x)},{}],17:[function(e,t,n){arguments[4][3][0].apply(n,arguments)},{dup:3,events:23}],18:[function(e,t,n){"use strict";var o=e("./Emitter"),r=function(){function e(){t.emit("change",t.isFullscreen())}var t,n=document.documentElement,r=!!(n.requestFullScreen||n.webkitRequestFullScreen||n.mozRequestFullScreen);return r&&(document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e)),t=Object.create(o.prototype,{_events:{value:{}},isSupported:{value:r},enter:{value:function(e){e=e||document.documentElement;var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen;t&&t.call(e)}},exit:{value:function(){var e=document.exitFullscreen||document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen;e&&e.call(document)}},toggle:{value:function(e){this.isFullscreen()?this.exit():this.enter(e)}},isFullscreen:{value:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen)}}})}();"object"==typeof t&&t.exports&&(t.exports=r)},{"./Emitter":3}],19:[function(e,t,n){"use strict";e("./polyfill-classlist"),e("./polyfill-console"),e("./polyfill-raf");var o={};o.array=e("./array"),o.AssetLoader=e("./AssetLoader"),o.CuepointsReader=e("./CuepointsReader"),o.device=e("./device"),o.Emitter=e("./Emitter"),o.Facebook=e("./Facebook"),o.Flash=e("./Flash"),o.FPS=e("./Fps"),o.fullscreen=e("./fullscreen"),o.Graphics=e("./Graphics"),o.InputCoords=e("./InputCoords"),o.keyboard=e("./keyboard"),o.KeyInput=e("./KeyInput"),o.LinkedList=e("./LinkedList"),o.math=e("./math"),o.modern=e("./modern"),o.MouseWheel=e("./MouseWheel"),o.ObjectPool=e("./ObjectPool"),o.platform=e("./platform"),o.popup=e("./popup"),o.ready=e("./ready"),o.resize=e("./resize"),o.share=e("./share"),o.storage=e("./storage"),o.string=e("./string"),o.TouchInput=e("./TouchInput"),o.track=e("./track"),o.urlParams=e("./urlParams"),o.VideoPlayer=e("./VideoPlayer"),o.Viewport=e("./viewport"),o.visibility=e("./visibility"),t.exports=o},{"./AssetLoader":1,"./CuepointsReader":2,"./Emitter":3,"./Facebook":4,"./Flash":5,"./Fps":6,"./Graphics":7,"./InputCoords":8,"./KeyInput":9,"./LinkedList":10,"./MouseWheel":11,"./ObjectPool":12,"./TouchInput":13,"./VideoPlayer":14,"./array":15,"./device":16,"./fullscreen":18,"./keyboard":20,"./math":21,"./modern":22,"./platform":24,"./polyfill-classlist":25,"./polyfill-console":26,"./polyfill-raf":27,"./popup":28,"./ready":29,"./resize":30,"./share":31,"./storage":32,"./string":33,"./track":34,"./urlParams":35,"./viewport":36,"./visibility":37}],20:[function(e,t,n){"use strict";var o={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,UNDERSCORE:189,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144};"object"==typeof t&&t.exports&&(t.exports=o)},{}],21:[function(e,t,n){"use strict";var o=180/Math.PI,r=Math.PI/180,i={angle:function(e,t,n,o){var r=n-e,i=o-t;return Math.atan2(i,r)},clamp:function(e,t,n){if(t>n){var o=t;t=n,n=o}return t>e?t:e>n?n:e},coinToss:function(){return Math.random()>.5},crossProduct:function(e,t,n,o){return e*o-t*n},degrees:function(e){return e*o},difference:function(e,t){return Math.abs(e-t)},distance:function(e,t,n,o){var r=i.distanceSQ(e,t,n,o);return Math.sqrt(r)},distanceSQ:function(e,t,n,o){var r=e-n,i=t-o;return r*r+i*i},dotProduct:function(e,t,n,o){return e*n+t*o},getCirclePoints:function(e,t,n,o,r,i){r=void 0===r?-Math.PI/2:r;for(var s,a=[],c=2*Math.PI,u=c/o,d=r;c+r>d;d+=u)s=void 0===i?{}:new i,s.x=e+n*Math.cos(d),s.y=t+n*Math.sin(d),a.push(s);return a},getIntersectionArea:function(e,t,n,o,r,i,s,a){var c=Math.max(0,Math.min(e+n,r+s)-Math.max(e,r)),u=Math.max(0,Math.min(t+o,i+a)-Math.max(t,i));return c*u},getOverlapX:function(e,t,n,o){return Math.max(0,Math.min(e+t,n+o)-Math.max(e,n))},getOverlapY:function(e,t,n,o){return Math.max(0,Math.min(e+t,n+o)-Math.max(e,n))},lerp:function(e,t,n){return e+(t-e)*n},map:function(e,t,n,o,r){return e===t?o:(e-t)*(r-o)/(n-t)+o},radians:function(e){return e*r},random:function(e,t){return isNaN(t)&&(t=e,e=0),e+Math.random()*(t-e)},rotateToDEG:function(e,t){var n=(t-e)%360;return n!==n%180&&(n=0>n?n+360:n-360),e+n},rotateToRAD:function(e,t){var n=2*Math.PI,o=(t-e)%n;return o!==o%Math.PI&&(o=0>o?o+n:o-n),e+o},roundToNearest:function(e,t){return Math.round(e/t)*t}};"object"==typeof t&&t.exports&&(t.exports=i)},{}],22:[function(e,t,n){"use strict";var o=function(){var e=function(){return!!navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i)}(),t=function(){var e=navigator.userAgent;return!!(e.match(/Android/i)&&parseFloat(e.slice(e.indexOf("Android")+8))<4)}(),n=function(){var e=navigator.userAgent,t=new RegExp(/AppleWebKit\/([\d.]+)/),n=t.exec(e),o=null===n?null:parseFloat(t.exec(e)[1]),r=e.match(/Android/i)&&null!==o&&537>o;return r}(),o=function(){var e=document.createElement("div");return e.innerHTML="<!--[if IE]><i></i><![endif]-->",1===e.getElementsByTagName("i").length}(),r=function(){try{Object.defineProperty({},"x",{}),Object.create({})}catch(e){return!1}return!0}(),i=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),s=function(){return Math.max(window.screen.width,window.screen.height,window.outerWidth,window.outerHeight)<=480}();return!(!i||!r||(e||t||n||o||s))}();window.Modernizr?window.Modernizr.addTest("modern",function(){return o}):"object"==typeof t&&t.exports&&(t.exports=o)},{}],23:[function(e,t,n){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e;
}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var t,n,o,i,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(s(n))for(i=Array.prototype.slice.call(arguments,1),u=n.slice(),o=u.length,c=0;o>c;c++)u[c].apply(this,i);return!0},o.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?o.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},o.prototype.removeListener=function(e,t){var n,o,i,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},o.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},o.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},o.listenerCount=function(e,t){return e.listenerCount(t)}},{}],24:[function(e,t,n){"use strict";var o=navigator.userAgent,r=/Android/.test(o),i=/iP[ao]d|iPhone/i.test(o),s=/Linux/.test(o),a=!i&&/Mac OS/.test(o),c=/Windows Phone/i.test(o),u=!c&&/Windows/.test(o),d=/iPad/i.test(o),l=/iPod/i.test(o),h=/iPhone/i.test(o),f=!!o.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i),p=!f,m=function(){return r?parseFloat(o.slice(o.indexOf("Android")+8)):-1}(),v=function(){if(/iP[ao]d|iPhone/i.test(o)){var e=o.match(/OS (\d+)_(\d+)/i);if(e&&e.length>2)return parseFloat(e[1]+"."+e[2])}return-1}(),g=function(){var e=o.match(/Android.*AppleWebKit\/([\d.]+)/);return!!e&&e[1]<537}(),w=function(){var e=-1;return/MSIE (\d+\.\d+);/.test(o)?e=parseInt(RegExp.$1,10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(e=parseInt(RegExp.$3,10)),e}(),x=/Chrome/.test(o),y=/Firefox/.test(o),b=function(){return y?parseFloat(o.slice(o.indexOf("Firefox")+8)):-1}(),E=w>-1,L=/Opera/.test(o),A=!g&&!x&&/Safari/.test(o),C=i&&/AppleWebKit/.test(o),T=i&&/CriOS/.test(o),_=/^(?:https?:\/\/)?(?:localhost|192\.168)/.test(window.location.href),M=Object.freeze({browser:{androidStockBrowser:g,chrome:x,chromeiOS:T,firefox:y,firefoxVersion:b,ie:E,ieVersion:w,opera:L,safari:A,safariMobile:C},device:{desktop:p,ipad:d,iphone:h,ipod:l,mobile:f},os:{android:r,ios:i,linux:s,osx:a,windows:u,windowsPhone:c,androidVersion:m,iosVersion:v},local:_});"object"==typeof t&&t.exports&&(t.exports=M)},{}],25:[function(e,t,n){"use strict";!function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=window.DOMTokenList.prototype[e];window.DOMTokenList.prototype[e]=function(e){var n,o=arguments.length;for(n=0;o>n;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=window.DOMTokenList.prototype.toggle;window.DOMTokenList.prototype.toggle=function(e,t){return t=!!t,arguments.length>1&&this.contains(e)===t?t:n.call(this,e)}}e=null}()},{}],26:[function(e,t,n){"use strict";!function(e){window.console=window.console||{};for(var t,n=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","markTimeline","memory","profile","profileEnd","table","time","timeEnd","timeStamp","timeline","timelineEnd","trace","warn"],o=0;o<n.length;o++)t=n[o],window.console[t]=window.console[t]||e}(function(){})},{}],27:[function(e,t,n){"use strict";!function(){for(var e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var t=(new Date).getTime(),o=Math.max(0,16-(t-n)),r=window.setTimeout(function(){e(t+o)},o);return n=t+o,r},window.cancelAnimationFrame=function(e){clearTimeout(e)}}}()},{}],28:[function(e,t,n){"use strict";var o=function(e,t,n,o){var r=(screen.width-n)/2,i=(screen.height-o)/2,s="width="+n+", height="+o+", top="+i+", left="+r+", directories=no, location=no, menubar=no, resizable=no, scrollbars=no, status=no, toolbar=no",a=window.open(e,t,s);return null===a||"undefined"==typeof a?!1:(window.focus&&a.focus(),!0)};"object"==typeof t&&t.exports&&(t.exports=o)},{}],29:[function(e,t,n){"use strict";var o;o=document.addEventListener?function(e,t){"complete"===document.readyState||"interactive"===document.readyState?e.call(t):document.addEventListener("DOMContentLoaded",function(){e.call(t)})}:function(e,t){"interactive"===document.readyState&&e.call(t),document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&e.call(t)})},"object"==typeof t&&t.exports&&(t.exports=o)},{}],30:[function(e,t,n){"use strict";var o=function(e,t,n,o,r){var i,s=e.width,a=e.height;switch(r){case"fill":i=Math.max(t/s,n/a);break;case"fit":i=Math.min(t/s,n/a);break;case"fitWidth":i=t/s;break;case"fitHeight":i=n/a;break;default:i=Math.max(t/s,n/a)}e.width=Math.ceil(s*i),e.height=Math.ceil(a*i),o&&(e.x=Math.round(.5*(t-e.width)),e.y=Math.round(.5*(n-e.height)))};"object"==typeof t&&t.exports&&(t.exports=o)},{}],31:[function(e,t,n){"use strict";function o(e){"http"!==e.substr(0,4)}var r=e("./popup"),i={facebook:function(e){return r("http://www.facebook.com/share.php?u="+encodeURIComponent(e),"shareFacebook",720,480)},twitter:function(e,t,n,o){return r("https://twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t)+"&hashtags="+encodeURIComponent(n)+"&related="+encodeURIComponent(o),"shareTwitter",550,380)},googlePlus:function(e){return r("https://plus.google.com/share?url="+encodeURIComponent(e),"shareGooglePlus",550,380)},pinterest:function(e,t,n){return o(t),r("http://pinterest.com/pin/create/button/?url="+encodeURIComponent(e)+"&media="+encodeURIComponent(t)+"&description="+encodeURIComponent(n),"sharePinterest",630,280)},vkontakte:function(e,t,n,o){return r("http://vkontakte.ru/share.php?url="+encodeURIComponent(e)+"&title="+t+"&description="+n+"&image="+encodeURIComponent(o),"shareVK",550,380)},renren:function(e,t){return r("http://share.renren.com/share/buttonshare.do?link="+encodeURIComponent(e)+"&title="+t,"shareRenRen",900,480)},weibo:function(e,t,n){return r("http://service.weibo.com/share/share.php?url="+encodeURIComponent(e)+"&appkey=&title="+t+"&pic="+encodeURIComponent(n)+"&ralateUid=&language=zh_cn","shareWeibo",640,480)},facebookFeedDialog:function(e,t,n,i,s,a,c,u){o(i),o(u);var d="http://www.facebook.com/dialog/feed?app_id="+e+"&picture="+i+(s&&""!==s?"&source="+s:"")+"&name="+encodeURIComponent(t)+"&link="+n+"&caption="+encodeURIComponent(a)+"&description="+encodeURIComponent(c)+"&display=popup&show_error=true&redirect_uri="+u;return r(d,"shareFacebook",550,380)}};"object"==typeof t&&t.exports&&(t.exports=i)},{"./popup":28}],32:[function(e,t,n){"use strict";var o={saveJSON:function(e,t){return localStorage?(localStorage.setItem(e,JSON.stringify(t)),!0):!1},loadJSON:function(e){return localStorage&&localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null},getImageDataURL:function(e,t,n){this.canvas||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")),this.canvas.width=t||e.width,this.canvas.height=n||e.height,this.context.drawImage(e,0,0);var o=this.canvas.toDataURL("image/png");return this.context.clearRect(0,0,t,n),o}};"object"==typeof t&&t.exports&&(t.exports=o)},{}],33:[function(e,t,n){"use strict";function o(e){return e.replace(/(\]|\[|\{|\}|\(|\)|\*|\+|\?|\.|\\)/g,"\\$1")}function r(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return e.replace(/^\s+/,"")}function s(e){return e.replace(/\s+$/,"")}function a(e,t,n){for(;e.length<n;)e=t+e;return e}function c(e,t,n){for(;e.length<n;)e+=t;return e}function u(e){var t=r(e);return t.replace(/\s+/g," ")}function d(e,t,n){var r=o(t),i=n?"g":"ig";return e.replace(new RegExp(r,i),"")}function l(e,t,n){void 0===n&&(n="..."),t-=n.length;var o=e;if(o.length>t){o=o.substr(0,t);var r=/[^\s]/;r.test(e.charAt(t))&&(o=s(o.replace(/\w+$|\s+$/,""))),o+=n}return o}function h(e,t){var n=i(e);return t?n.replace(/^.|\b./g,function(e){return e.toUpperCase()}):n.replace(/(^\w)/,function(e){return e.toUpperCase()})}function f(e){var t=e.toLowerCase().replace(/\b([^.?;!]+)/,h);return t.replace(/\b[i]\b/,"I")}function p(e){return e.split("").reverse().join("")}function m(e){return e.split(" ").reverse().join(" ")}function v(e){return e.replace(/<\/?[^>]+>/gim,"")}function g(e){return e.replace(/(\w)/,function(e){var t=e.toLowerCase(),n=e.toUpperCase();switch(e){case t:return n;case n:return t;default:return e}})}function w(e,t){void 0===t&&(t=":");var n=Math.floor(e/3600),o=Math.floor(e%3600/60),r=Math.floor(e%3600%60),i=(10>n?"0"+n:n)+t,s=(10>o?"0"+o:o)+t,a=10>r?"0"+r:r;return i+s+a}function x(e,t){return 0===e.indexOf(t)}function y(e,t){return-1!==e.indexOf(t)}function b(e,t,n){var r=o(t),i=n?"g":"ig";return e.match(new RegExp(r,i)).length}function E(e,t){return e.lastIndexOf(t)===e.length-t.length}function L(e){var t=u(e);return!!t.length}function A(e){return!e.length}function C(e){var t=/^[-+]?\d*\.?\d+(?:[eE][-+]?\d+)?$/;return t.test(e)}function T(e){return e.match(/\b\w+\b/g).length}function _(e,t){var n=e.indexOf(t);return-1===n?"":(n+=t.length,e.substr(n))}function M(e,t){var n=e.lastIndexOf(t);return-1===n?"":(n+=t.length,e.substr(n))}function F(e,t){var n=e.indexOf(t);return-1===n?"":e.substr(0,n)}function O(e,t){var n=e.lastIndexOf(t);return-1===n?"":e.substr(0,n)}function P(e,t,n){var o="",r=e.indexOf(t);if(-1!==r){r+=t.length;var i=e.indexOf(n,r);-1!==i&&(o=e.substr(r,i-r))}return o}function I(e,t,n){void 0===n&&(n=".");var i=[];if(!e||!y(e,n))return i;" "===n&&(e+=n);for(var s=0,a=e.length,c=new RegExp("[^"+o(n)+"]+$");a>s;){var u=e.substr(s,t);y(u,n)||(i.push(l(u,u.length)),s+=u.length),u=u.replace(c,""),i.push(r(u)),s+=u.length}return i}function S(e,t){var n;if(null===e&&(e=""),null===t&&(t=""),e===t)return 0;var o,r,i=[],s=e.length,a=t.length;if(0===s)return a;if(0===a)return s;for(n=0;s>=n;n++)i[n]=[];for(n=0;s>=n;n++)i[n][0]=n;for(r=0;a>=r;r++)i[0][r]=r;for(n=1;s>=n;n++){var c=e.charAt(n-1);for(r=1;a>=r;r++){var u=t.charAt(r-1);o=c===u?0:1,i[n][r]=Math.min(i[n-1][r]+1,i[n][r-1]+1,i[n-1][r-1]+o)}}return i[s][a]}function k(e,t){var n=S(e,t),o=Math.max(e.length,t.length);return 0===o?1:1-n/o}var R={escapePattern:o,trim:r,trimLeft:i,trimRight:s,padLeft:a,padRight:c,removeExtraWhitespace:u,remove:d,truncate:l,capitalize:h,properCase:f,reverse:p,reverseWords:m,stripTags:v,swapCase:g,timeCode:w,beginsWith:x,contains:y,countOf:b,endsWith:E,hasText:L,isEmpty:A,isNumeric:C,wordCount:T,afterFirst:_,afterLast:M,beforeFirst:F,beforeLast:O,between:P,block:I,editDistance:S,similarity:k};"object"==typeof t&&t.exports&&(t.exports=R)},{}],34:[function(e,t,n){"use strict";var o={init:function(e){!function(e,t,n,o,r,i,s){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,i=t.createElement(n),s=t.getElementsByTagName(n)[0],i.async=1,i.src=o,s.parentNode.insertBefore(i,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create",e,"auto"),window.ga("send","pageview")},page:function(e){window.ga("send",{hitType:"pageview",page:e,title:e})},event:function(e,t,n,o){n?window.ga("send",{hitType:"event",eventCategory:e,eventAction:t,eventLabel:n,eventValue:o}):window.ga("send",{hitType:"event",eventCategory:e,eventAction:t})}};"object"==typeof t&&t.exports&&(t.exports=o)},{}],35:[function(e,t,n){"use strict";var o={};!function(){for(var e=/\+/g,t=/([^&=]+)=?([^&]*)/g,n=function(t){return decodeURIComponent(t.replace(e," "))},r=window.location.search.substring(1),i=t.exec(r);i;)o[n(i[1])]=n(i[2]),i=t.exec(r)}(),"object"==typeof t&&t.exports&&(t.exports=o)},{}],36:[function(e,t,n){"use strict";var o=e("./Emitter"),r=e("./resize"),i={rect:{x:0,y:0,width:0,height:0,stageWidth:0,stageHeight:0,scale:1},originalWidth:0,originalHeight:0,init:function(e,t){this.emitter=new o,this.originalWidth=e,this.originalHeight=t;var n=this;window.onresize=window.onorientationchange=function(){n.resize()},this.resize()},resize:function(){this.rect.x=0,this.rect.y=0,this.rect.width=this.originalWidth,this.rect.height=this.originalHeight,this.rect.stageWidth=this.getWindowWidth(),this.rect.stageHeight=this.getWindowHeight(),this.rect.scale=1,this.rect.stageWidth>this.rect.stageHeight?r(this.rect,this.rect.stageWidth,this.rect.stageHeight,!0,"fill"):r(this.rect,this.rect.stageWidth,this.rect.stageHeight,!0,"fitWidth"),this.rect.scale=this.rect.width/this.originalWidth,this.emitter.emit("resize")},mouseLeftWindow:function(e,t){document.addEventListener("mouseout",function(n){var o=n.relatedTarget||n.toElement;o&&"HTML"!==o.nodeName||e.call(t)})},getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset||0},getWindowScrollY:function(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0},getDocHeight:function(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)},getScrollPercentage:function(){return(this.getWindowScrollY()+this.getWindowHeight())/this.getDocHeight()*100}};"object"==typeof t&&t.exports&&(t.exports=i)},{"./Emitter":3,"./resize":30}],37:[function(e,t,n){"use strict";function o(){document[i]?r.emit("hidden"):r.emit("shown")}var r,i,s,a=e("./Emitter");"undefined"!=typeof document.hidden?(i="hidden",s="visibilitychange"):"undefined"!=typeof document.mozHidden?(i="mozHidden",s="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(i="msHidden",s="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",s="webkitvisibilitychange"),void 0!==s&&document.addEventListener(s,o,!1),r=Object.create(a.prototype,{_events:{value:{}}}),"object"==typeof t&&t.exports&&(t.exports=r)},{"./Emitter":3}]},{},[19])(19)});